<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Konkan Mart — Payment</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root{
  --green:#2e7d32;
  --red:#e53935;
  --orange:#ff7b00;
  --blue:#1685a4;
  --bg:#f4f6f3;
}

*{box-sizing:border-box;font-family:'Poppins',sans-serif}

body{
  background:linear-gradient(135deg,#e8f5e9,#f1f8e9);
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}

.container{
  width:100%;
  max-width:420px;
  background:#fff;
  padding:30px;
  border-radius:16px;
  box-shadow:0 12px 28px rgba(0,0,0,0.12);
}

.brand{
  text-align:center;
  margin-bottom:20px;
}
.brand h2{
  color:var(--red);
  margin-bottom:5px;
}
.brand p{
  font-size:13px;
  color:#777;
}

label{
  font-size:13px;
  color:#555;
}

input[type="file"]{
  width:100%;
  padding:12px;
  margin-top:6px;
  margin-bottom:14px;
  border-radius:10px;
  border:1px solid #ccc;
}

input:focus{
  outline:none;
  border-color:var(--green);
}

.preview{
  width:100%;
  border-radius:12px;
  margin-bottom:15px;
  display:none;
  border:1px dashed #ccc;
}

button{
  width:100%;
  padding:12px;
  background:linear-gradient(135deg,var(--blue),#09bb91a2);
  color:white;
  border:none;
  border-radius:25px;
  font-size:15px;
  font-weight:600;
  cursor:pointer;
  transition:.3s;
}

button:hover{
  transform:translateY(-2px);
  box-shadow:0 6px 15px rgba(0,0,0,0.25);
}

button:disabled{
  opacity:.7;
  cursor:not-allowed;
}

.note{
  margin-top:15px;
  font-size:12px;
  color:#777;
  text-align:center;
}
.note span{
  color:var(--green);
  font-weight:500;
}
</style>
</head>

<body>

<div class="container">
  <div class="brand">
    <h2>Konkan Mart</h2>
    <p>Secure Payment Verification</p>
  </div>

  <!-- ORDER ID REMOVED -->

  <label>Payment Screenshot</label>
  <input type="file" id="screenshot" accept="image/*">

  <img id="preview" class="preview">

  <button id="btn">Submit Payment</button>

  <div class="note">
    Payment will be <span>verified by admin</span><br>
    Order status updates automatically
  </div>
</div>

<script>
const fileInput = document.getElementById("screenshot");
const preview = document.getElementById("preview");
const btn = document.getElementById("btn");

fileInput.onchange = () => {
  const file = fileInput.files[0];
  if(!file || !file.type.startsWith("image/")){
    alert("Only image files allowed");
    fileInput.value = "";
    return;
  }
  preview.src = URL.createObjectURL(file);
  preview.style.display = "block";
};

btn.onclick = async () => {
  const file = fileInput.files[0];

  if(!file){
    alert("Please upload payment screenshot");
    return;
  }

  btn.disabled = true;
  btn.innerText = "Uploading...";

  const fd = new FormData();
  fd.append("screenshot", file);

  try{
    const res = await fetch("http://localhost:4000/api/payment",{
      method:"POST",
      body:fd
    });

    const data = await res.json();
    if(!res.ok) throw data;

    btn.innerText = "Submitted ✅";
    alert("Payment uploaded successfully!");
  }catch(err){
    alert(err.error || "Upload failed");
    btn.disabled = false;
    btn.innerText = "Submit Payment";
  }
};
</script>

</body>
</html>

<!-- <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Konkan Mart — Payment</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root{
  --green:#2e7d32;
  --red:#e53935;
  --orange:#ff7b00;
  --blue:#1685a4;
  --bg:#f4f6f3;
}

*{box-sizing:border-box;font-family:'Poppins',sans-serif}

body{
  background:linear-gradient(135deg,#e8f5e9,#f1f8e9);
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}

.container{
  width:100%;
  max-width:420px;
  background:#fff;
  padding:30px;
  border-radius:16px;
  box-shadow:0 12px 28px rgba(0,0,0,0.12);
}

.brand{
  text-align:center;
  margin-bottom:20px;
}
.brand h2{
  color:var(--red);
  margin-bottom:5px;
}
.brand p{
  font-size:13px;
  color:#777;
}

label{
  font-size:13px;
  color:#555;
}
input[type="text"], input[type="file"]{
  width:100%;
  padding:12px;
  margin-top:6px;
  margin-bottom:14px;
  border-radius:10px;
  border:1px solid #ccc;
}
input:focus{
  outline:none;
  border-color:var(--green);
}

.preview{
  width:100%;
  border-radius:12px;
  margin-bottom:15px;
  display:none;
  border:1px dashed #ccc;
}

button{
  width:100%;
  padding:12px;
  background:linear-gradient(135deg,var(--blue),#09bb91a2);
  color:white;
  border:none;
  border-radius:25px;
  font-size:15px;
  font-weight:600;
  cursor:pointer;
  transition:.3s;
}
button:hover{
  transform:translateY(-2px);
  box-shadow:0 6px 15px rgba(0,0,0,0.25);
}
button:disabled{
  opacity:.7;
  cursor:not-allowed;
}

.note{
  margin-top:15px;
  font-size:12px;
  color:#777;
  text-align:center;
}
.note span{
  color:var(--green);
  font-weight:500;
}
</style>
</head>

<body>

<div class="container">
  <div class="brand">
    <h2>Konkan Mart</h2>
    <p>Secure Payment Verification</p>
  </div>

  FIELD NAME SAME 
  <label>Order ID</label>
  <input type="text" id="orderId" placeholder="Enter Order ID">

  FIELD NAME SAME 
  <label>Payment Screenshot</label>
  <input type="file" id="screenshot" accept="image/*">

  <img id="preview" class="preview">

  <button id="btn">Submit Payment</button>

  <div class="note">
    Payment will be <span>verified by admin</span><br>
    Order status updates automatically
  </div>
</div>

<script>
const fileInput = document.getElementById("screenshot");
const preview = document.getElementById("preview");
const btn = document.getElementById("btn");

fileInput.onchange = () => {
  const file = fileInput.files[0];
  if(!file || !file.type.startsWith("image/")){
    alert("Only image files allowed");
    fileInput.value="";
    return;
  }
  preview.src = URL.createObjectURL(file);
  preview.style.display = "block";
};

btn.onclick = async () => {
  const orderId = document.getElementById("orderId").value.trim();
  const file = fileInput.files[0];

  if(!orderId || !file){
    alert("All fields required");
    return;
  }

  btn.disabled = true;
  btn.innerText = "Uploading...";

  const fd = new FormData();
  fd.append("screenshot", file); // ❗ SAME KEY

  try{
    const res = await fetch(`http://localhost:4000/api/payment/${orderId}`,{
      method:"POST",
      body:fd
    });
    const data = await res.json();
    if(!res.ok) throw data;

    btn.innerText = "Submitted ✅";
    alert("Payment uploaded successfully!");
  }catch(err){
    alert(err.error || "Upload failed");
    btn.disabled = false;
    btn.innerText = "Submit Payment";
  }
};
</script>

</body>
</html> -->